<html>
<head>
<meta charset="utf-8">

</head>
<body>
    <style>

	
    </style>

    <script type="text/front-matter">
        title: "Article Title"
        description: "Description of the post"
        authors:
        - Josh Varty: http://joshvarty.com
        affiliations:
        - None  : http://joshvarty.com
      </script>
      
      <dt-article>
        <h1>Alpha Zero</h1>
        <h2>A description of the article</h2>
        <dt-byline></dt-byline>
        <p>This is the first paragraph of the article.</p>
        <p>We can also cite <dt-cite key="gregor2015draw"></dt-cite> external publications.</p>
        <p>Also this a footnote. <dt-fn>This will become a hoverable footnote.</dt-fn> </p>

        <figure id="tree" style="height:600px;width:100%;margin:0;background:#000b2a">
          <svg style="background:#000b2a; margin: 0 auto; display:block; width:1700px; height:500px; padding-top:25px;"></svg>
        </figure>
      </dt-article>

      
      <dt-appendix>
      </dt-appendix>
      
      <script type="text/bibliography">
        @article{gregor2015draw,
          title={DRAW: A recurrent neural network for image generation},
          author={Gregor, Karol and Danihelka, Ivo and Graves, Alex and Rezende, Danilo Jimenez and Wierstra, Daan},
          journal={arXivreprint arXiv:1502.04623},
          year={2015},
          url={https://arxiv.org/pdf/1502.04623.pdf}
        }
      </script>

    <script src="https://distill.pub/template.v1.js"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>

    <script>

      class Node {
        constructor(x, y, state, parent, toPlay) {
          this.x = x;
          this.y = y;
          this.state = state;
          this.parent = parent
          this.children = []
          this.toPlay = toPlay

          if (this.parent != null) {
            this.parent.children.push(this);
          }
        }
      }

       const kPath = `M78.3,96.5c-0.1,0.4-0.5,0.6-1.1,0.6H64.9c-0.7,0-1.4-0.3-1.9-1l-20.3-26L37,75.5v20.1 c0,0.9-0.5,1.4-1.4,1.4H26c-0.9,0-1.4-0.5-1.4-1.4V3.9c0-0.9,0.5-1.4,1.4-1.4h9.5C36.5,2.5,37,3,37,3.9v56.5l24.3-24.7 c0.6-0.6,1.3-1,1.9-1H76c0.6,0,0.9,0.2,1.1,0.7c0.2,0.6,0.1,1-0.1,1.2l-25.7,25L78,95.1C78.4,95.5,78.5,95.9,78.3,96.5z`;
       const goose1Path = `M8.8,92.7c-4-18.5,4.7-37.2,20.7-46.2c0,0,2.7-1.4,3.4-1.9c2.2-1.6,3-2.1,3-5c0-5-2.1-7.2-2.1-7.2 c-3.9-3.3-6.3-8.2-6.3-13.7c0-10,8.1-18.1,18.1-18.1s18.1,8.1,18.1,18.1c0,6-1.5,32.7-2.3,38.8l-0.1,1`;
       const goose2Path = `M27.4,19L8.2,27.6c0,0-7.3,2.9,2.6,5c6.1,1.3,24,5.9,24,5.9l1,0.3`;
       const goose3Path =  `M63.7,99.6C52.3,99.6,43,90.3,43,78.9s9.3-20.7,20.7-20.7c10.6,0,34.4,0.1,35.8,9`;

      function placeEdges(node) {

        for (var i = 0; i < node.children.length; i++) {

          //Recursively place edges
          placeEdges(node.children[i]);

          //Draw edge for this child
          let x1 = node.x + 32
          let y1 = node.y + 25
          let x2 = node.children[i].x + 32
          let y2 = node.children[i].y - 15

          placeLine("#tree svg", x1, y1, x2, y2);
        }
      }

      function placeEmptySlot(container, x, y) {

        container
          .append('svg')
          .attr('x', x)
          .attr('y', y)
          .append('circle')
          .attr('cx', 80)
          .attr('cy', 80)
          .attr('r', 75)
          .attr('fill', 'rgba(0, 255, 255, 0)')
          .attr('stroke', '#0358a4')
          .attr('stroke-width', '13')
      }

      function placeGoosePiece(container, x, y) {
        let svg = container
            .append('svg')
            .attr('x', x)
            .attr('y', y)


        // outer circle
        svg.append('circle')
            .attr('cx', 80)
            .attr('cy', 80)
            .attr('r', 75)
            .attr('fill', 'rgba(255, 255, 255, 0.5)')
            .attr('stroke', 'rgba(255, 255, 255, 0.5)')
            .attr('stroke-width', '3')
        
        // inner circle
        svg.append('circle')
            .attr('cx', 80)
            .attr('cy', 80)
            .attr('r', 60)
            .attr('fill', 'none')
            .attr('stroke', 'rgba(255, 255, 255, 0.5)')
            .attr('stroke-width', '2')

        // goose
        var goose = svg.append('svg').attr('stroke', 'black').attr('fill', 'rgba(0,0,0,0)');
        goose.append('path')
          .attr('d', goose1Path)
          .attr('stroke', 'rgba(255, 255, 255, 1)')
          .attr('stroke-width', '2')
        goose.append('path')
          .attr('d', goose2Path)
          .attr('stroke', 'rgba(255, 255, 255, 1)')
          .attr('stroke-width', '2')
        goose.append('path')
          .attr('d', goose3Path)
          .attr('stroke', 'rgba(255, 255, 255, 1)')
          .attr('stroke-width', '2')
        goose.attr('x', '35')
        goose.attr('y', '35') 
      }

      function placeKagglePiece(container, x, y) {
        // Build the kaggle game piece logo and place inside SVG

        let svg = container
          .append('svg')
          .attr('x', x)
          .attr('y', y)

        // outer circle
        svg.append('circle')
            .attr('cx', 80)
            .attr('cy', 80)
            .attr('r', 75)
            .attr('fill', 'rgba(0, 255, 255, 0.5)')
            .attr('stroke', 'rgba(0, 255, 255, 0.5)')
            .attr('stroke-width', '3')

        // inner circle
        svg.append('circle')
            .attr('cx', 80)
            .attr('cy', 80)
            .attr('r', 60)
            .attr('fill', 'none')
            .attr('stroke', 'rgba(0, 255, 255, 0.5)')
            .attr('stroke-width', '2')

        // kaggle logo
        var kaggle = svg.append('svg')
            .attr('stroke', 'black')
            .attr('fill', 'rgba(0,0,0,0)')
            .attr('viewBox', '0 0 100 100')
            .attr('height', '80')
            .attr('width', '80')

        kaggle.append('path')
            .attr('d', kPath)
            .attr('stroke', 'rgba(0, 255, 255, 1)')
            .attr('stroke-width', '2')
            .attr('scale', '0.6')
        kaggle.attr('x', '40')
        kaggle.attr('y', '40') 
      }

      function placeLine(containerId, x1, y1, x2, y2) {
        let container = d3.select(containerId)
          .append('line')
          .attr('x1', x1)
          .attr('y1', y1)
          .attr('x2', x2)
          .attr('y2', y2)
          .attr('stroke', 'rgba(255, 255, 255, 0.5')
      }

      function placeBoard(containerId, node) {

        let container = d3.select(containerId)
          .append('svg')
          .attr('height', 15)
          .attr('width', 63)
          .attr('viewBox', "0 0 672 160")
          .attr('style', 'background:#000b2a')
          .attr('x', node.x)
          .attr('y', node.y)

          let margin = 10
          placeEmptySlot(container, 0,   0);
          placeEmptySlot(container, 160 + margin, 0);
          placeEmptySlot(container, 320 + margin + margin, 0);
          placeEmptySlot(container, 480 + margin + margin + margin, 0);

          let xOffset = 0
          let yOffset = 0
          for(let i = 0; i < node.state.length; i++) {
            if (node.state[i] == 1) {
              placeKagglePiece(container, xOffset, yOffset)
            } else if (node.state[i] == -1) {
              placeGoosePiece(container, xOffset, yOffset)
            }
            else {

            }

            xOffset = xOffset + 160 + margin
          }
      }

      let width = 1700

      let root = new Node(860-32, 0, [0,0,0,0], null, 1)
      placeBoard("#tree svg", root)

      let y = 100
      let r1c1 = new Node(2*1700/12/2, y, [1,  0,  0,  0], root, -1)
      let r1c2 = new Node(9*1700/12/2, y, [0,  1,  0,  0], root, -1)
      let r1c3 = new Node(14*1700/12/2, y, [0,  0,  1,  0], root, -1)
      let r1c4 = new Node(21*1700/12/2, y, [0,  0,  0,  1], root, -1)
      placeBoard("#tree svg", r1c1)
      placeBoard("#tree svg", r1c2)
      placeBoard("#tree svg", r1c3)
      placeBoard("#tree svg", r1c4)

      y = 200
      let r2c1 = new Node(1*1700/12/2/2, y, [1, -1,  0,  0], r1c1, 1)
      let r2c2 = new Node(4*1700/12/2/2, y, [1,  0, -1,  0], r1c1, 1)
      let r2c3 = new Node(7*1700/12/2/2, y, [1,  0,  0, -1], r1c1, 1)
      placeBoard("#tree svg", r2c1)
      placeBoard("#tree svg", r2c2)
      placeBoard("#tree svg", r2c3)
      
      let r2c4 = new Node(14*1700/12/2/2, y, [-1,  1,  0,  0], r1c2, 1)
      let r2c5 = new Node(17*1700/12/2/2, y, [ 0,  1, -1,  0], r1c2, 1)
      let r2c6 = new Node(20*1700/12/2/2, y, [ 0,  1,  0, -1], r1c2, 1)
      placeBoard("#tree svg", r2c4)
      placeBoard("#tree svg", r2c5)
      placeBoard("#tree svg", r2c6)
      
      let r2c7 = new Node(26*1700/12/2/2, y, [-1,  0,  1,  0], r1c3, 1)
      let r2c8 = new Node(29*1700/12/2/2, y, [ 0, -1,  1,  0], r1c3, 1)
      let r2c9 = new Node(32*1700/12/2/2, y, [ 0,  0,  1, -1], r1c3, 1)
      placeBoard("#tree svg", r2c7)
      placeBoard("#tree svg", r2c8)
      placeBoard("#tree svg", r2c9)
      
      let r2c10 = new Node(39*1700/12/2/2, y, [-1,  0,  0,  1], r1c4, 1)
      let r2c11 = new Node(42*1700/12/2/2, y, [ 0, -1,  0,  1], r1c4, 1)
      let r2c12 = new Node(45*1700/12/2/2, y, [ 0,  0, -1,  1], r1c4, 1)
      placeBoard("#tree svg", r2c10)
      placeBoard("#tree svg", r2c11)
      placeBoard("#tree svg", r2c12)

      y = 300
      let r3c1 = new Node(0*1700/12/2/2, y, [ 1, -1,  1,  0], r2c1, -1)
      let r3c2 = new Node(2*1700/12/2/2, y, [ 1, -1,  0,  1], r2c1, -1)
      placeBoard("#tree svg", r3c1)
      placeBoard("#tree svg", r3c2)
      
      let r3c3 = new Node(4*1700/12/2/2, y, [ 1,  1, -1,  0], r2c2, -1)
      let r3c4 = new Node(6*1700/12/2/2, y, [ 1,  0, -1,  1], r2c2, -1)
      placeBoard("#tree svg", r3c3)
      placeBoard("#tree svg", r3c4)

      let r3c5 = new Node(8*1700/12/2/2, y,  [ 1,  1,  0, -1], r2c3, -1)
      let r3c6 = new Node(10*1700/12/2/2, y, [ 1,  0,  1, -1], r2c3, -1)
      placeBoard("#tree svg", r3c5)
      placeBoard("#tree svg", r3c6)
      
      let r3c7 = new Node(12*1700/12/2/2, y, [-1,  1,  1,  0], r2c4, -1)
      let r3c8 = new Node(14*1700/12/2/2, y, [-1,  1,  0,  1], r2c4, -1)
      placeBoard("#tree svg", r3c7)
      placeBoard("#tree svg", r3c8)
      
      let r3c9  = new Node(16*1700/12/2/2, y, [ 1,  1, -1,  0], r2c5, -1)
      let r3c10 = new Node(18*1700/12/2/2, y, [ 0,  1, -1,  1], r2c5, -1)
      placeBoard("#tree svg", r3c9)
      placeBoard("#tree svg", r3c10)
      
      let r3c11 = new Node(20*1700/12/2/2, y, [ 1,  1,  0, -1], r2c6, -1)
      let r3c12 = new Node(22*1700/12/2/2, y, [ 0,  1,  1, -1], r2c6, -1)
      placeBoard("#tree svg", r3c11)
      placeBoard("#tree svg", r3c12)
      
      let r3c13 = new Node(24*1700/12/2/2, y, [-1,  1,  1,  0], r2c7, -1)
      let r3c14 = new Node(26*1700/12/2/2, y, [-1,  0,  1,  1], r2c7, -1)
      placeBoard("#tree svg", r3c13)
      placeBoard("#tree svg", r3c14)
      
      let r3c15 = new Node(28*1700/12/2/2, y, [ 1, -1,  1,  0], r2c8, -1)
      let r3c16 = new Node(30*1700/12/2/2, y, [ 0, -1,  1,  1], r2c8, -1)
      placeBoard("#tree svg", r3c15)
      placeBoard("#tree svg", r3c16)
      
      let r3c17 = new Node(32*1700/12/2/2, y, [ 1,  0,  1, -1], r2c9, -1)
      let r3c18 = new Node(34*1700/12/2/2, y, [ 0,  1,  1, -1], r2c9, -1)
      placeBoard("#tree svg", r3c17)
      placeBoard("#tree svg", r3c18)
      
      let r3c19 = new Node(36*1700/12/2/2, y, [-1,  1,  0,  1], r2c10, -1)
      let r3c20 = new Node(38*1700/12/2/2, y, [-1,  0,  1,  1], r2c10, -1)
      placeBoard("#tree svg", r3c19)
      placeBoard("#tree svg", r3c20)
      
      let r3c21 = new Node(40*1700/12/2/2, y, [ 1, -1,  0,  1], r2c11, -1)
      let r3c22 = new Node(42*1700/12/2/2, y, [ 0, -1,  1,  1], r2c11, -1)
      placeBoard("#tree svg", r3c21)
      placeBoard("#tree svg", r3c22)
      
      let r3c23 = new Node(44*1700/12/2/2, y, [ 1,  0, -1,  1], r2c12, -1)
      let r3c24 = new Node(46*1700/12/2/2, y, [ 0,  1, -1,  1], r2c12, -1)
      placeBoard("#tree svg", r3c23)
      placeBoard("#tree svg", r3c24)

      y = 400
      let r4c1 = new Node(0*1700/12/2/2, y, [ 1, -1,  1, -1], r3c1, -1)
      let r4c2 = new Node(2*1700/12/2/2, y, [ 1, -1, -1,  1], r3c2, -1)
      placeBoard("#tree svg", r4c1)
      placeBoard("#tree svg", r4c2)

      let r4c3 = new Node(6*1700/12/2/2, y, [ 1, -1, -1,  1], r3c4, 1)
      placeBoard("#tree svg", r4c3)

      let r4c4 = new Node(10*1700/12/2/2, y, [ 1, -1,  1, -1], r3c6, 1)
      placeBoard("#tree svg", r4c4)

      let r4c5 = new Node(14*1700/12/2/2, y, [-1,  1, -1,  1], r3c8, 1)
      placeBoard("#tree svg", r4c5)

      let r4c6 = new Node(18*1700/12/2/2, y, [-1,  1, -1,  1], r3c10, 1)
      placeBoard("#tree svg", r4c6)

      let r4c7 = new Node(28*1700/12/2/2, y, [1, -1,  1, -1], r3c15, 1)
      placeBoard("#tree svg", r4c7)

      let r4c8 = new Node(32*1700/12/2/2, y, [ 1, -1,  1, -1], r3c17, 1)
      placeBoard("#tree svg", r4c8)

      let r4c9 = new Node(36*1700/12/2/2, y, [-1,  1, -1,  1], r3c19, 1)
      placeBoard("#tree svg", r4c9)

      let r4c10 = new Node(40*1700/12/2/2, y, [ 1, -1, -1,  1], r3c21, 1)
      placeBoard("#tree svg", r4c10)

      let r4c11 = new Node(44*1700/12/2/2, y, [ 1, -1, -1,  1], r3c23, 1)
      let r4c12 = new Node(46*1700/12/2/2, y, [-1,  1, -1,  1], r3c24, 1)
      placeBoard("#tree svg", r4c11)
      placeBoard("#tree svg", r4c12)

      // Place edges
      placeEdges(root)






      // x = 1700/12/2/2;
      // y = 200
      // for (let i = 0; i < 12; i++) {
      //   placeEmptyBoard("#tree svg", x, y)
      //   x = x + 1700/12;
      // }
      
      // x = 0
      // y = 300
      // for (let i = 0; i < 24; i++) {
      //   placeEmptyBoard("#tree svg", x, y)
      //   x = x + 1700/24;
      // }

    </script>
</body>
</html>